# å¡«å……æ•°æ®åº“ - æ–°é—»é‡‡é›†æŒ‡å—

## ğŸ“‹ å½“å‰çŠ¶æ€

- âœ… RSSæºå·²æ‰©å……ï¼š30ä¸ª â†’ **46ä¸ª** (+53%)
- âœ… ä»£ç å·²éƒ¨ç½²åˆ°Render
- â³ Renderæ­£åœ¨é‡æ–°éƒ¨ç½²ï¼ˆé¢„è®¡2-5åˆ†é’Ÿï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šåŒå‡»è¿è¡Œè„šæœ¬ï¼ˆæ¨èï¼‰

**ç­‰Renderéƒ¨ç½²å®Œæˆåï¼ˆçº¦2-5åˆ†é’Ÿï¼‰**ï¼š

1. åŒå‡»è¿è¡Œï¼š`trigger-scraping.bat`
2. ç­‰å¾…é‡‡é›†å®Œæˆï¼ˆå¯èƒ½éœ€è¦5-10åˆ†é’Ÿï¼Œå–å†³äºå¹¶å‘æ•°å’Œæ–°é—»æ•°é‡ï¼‰
3. æŸ¥çœ‹ç»Ÿè®¡ç»“æœ

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯ç”¨
- âœ… è§¦å‘é‡‡é›†ä»»åŠ¡
- âœ… æ˜¾ç¤ºé‡‡é›†ç»Ÿè®¡

### æ–¹å¼2ï¼šæµè§ˆå™¨ç›´æ¥è®¿é—®

åœ¨æµè§ˆå™¨æ‰“å¼€ä»¥ä¸‹URLï¼ˆéœ€è¦æ›¿æ¢æˆä½ çš„å®é™…åŸŸåï¼‰ï¼š

```
https://ä½ çš„åŸŸå/api/news/scraper/trigger
```

### æ–¹å¼3ï¼šå‘½ä»¤è¡Œ

```bash
# Windows PowerShell
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/trigger

# æˆ–ä½¿ç”¨Git Bash
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/trigger
```

---

## â±ï¸ é‡‡é›†æ—¶é—´ä¼°ç®—

æ ¹æ®å½“å‰é…ç½®ï¼š
- **RSSæºæ•°é‡**: 46ä¸ª
- **å¹¶å‘é™åˆ¶**: 4æ¡æ–°é—»åŒæ—¶å¤„ç†
- **é¢„è®¡æ¯æºæ–°é—»**: 10-30æ¡
- **æ€»æ–°é—»æ•°**: çº¦460-1380æ¡

**é¢„è®¡æ—¶é—´**:
- RSSè§£æ: 1-2åˆ†é’Ÿ
- AIåˆ†æ: 8-15åˆ†é’Ÿï¼ˆå–å†³äºGLM APIé€Ÿåº¦ï¼‰
- **æ€»è®¡**: çº¦10-20åˆ†é’Ÿ

---

## ğŸ“Š æŸ¥çœ‹é‡‡é›†è¿›åº¦

### 1. æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼ˆRender Dashboardï¼‰

è®¿é—®: https://dashboard.render.com
1. è¿›å…¥ä½ çš„APIæœåŠ¡
2. ç‚¹å‡» "Logs" æ ‡ç­¾
3. å®æ—¶æŸ¥çœ‹é‡‡é›†è¿›åº¦

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—ï¼š
```
[NewsScraperService] å¼€å§‹å¤„ç† 150 æ¡æ–°é—»ï¼Œå¹¶å‘æ•°: 4
[NewsScraperService] [1/150] å¤„ç†æ–°é—»: OpenAI Announces GPT-5...
[NewsScraperService] âœ“ æˆåŠŸä¿å­˜æ–°é—»: OpenAI Announces... (ä¸­æ–‡æ ‡é¢˜: âˆš)
...
[NewsScraperService] Scraping complete: 120 new, 25 duplicates, 5 failed
```

### 2. æŸ¥çœ‹ç»Ÿè®¡API

```bash
# é‡‡é›†ç»Ÿè®¡
curl https://ä½ çš„åŸŸå/api/news/scraper/stats

# è¿”å›ç¤ºä¾‹ï¼š
{
  "totalNews": 1245,
  "todayNews": 120,
  "last24Hours": 120,
  "byCategory": [...],
  "bySource": [...]
}
```

### 3. æŸ¥çœ‹é‡‡é›†çŠ¶æ€

```bash
curl https://ä½ çš„åŸŸå/api/news/scraper/status

# è¿”å›ç¤ºä¾‹ï¼š
{
  "isInProgress": true  # é‡‡é›†ä¸­
}
```

---

## ğŸ”„ å®šæ—¶é‡‡é›†è®¾ç½®

æœåŠ¡å·²é…ç½®ä¸º**æ¯å°æ—¶è‡ªåŠ¨é‡‡é›†ä¸€æ¬¡**ï¼š

```typescript
// apps/api/src/modules/news/schedulers/news-scraper.scheduler.ts
@Cron(CronExpression.EVERY_HOUR)  // æ¯å°æ—¶æ‰§è¡Œ
async handleHourlyScraping() {
  // è‡ªåŠ¨é‡‡é›†æ–°é—»
}
```

ä¹Ÿå°±æ˜¯è¯´ï¼š
- â° æ¯å°æ—¶0åˆ†è‡ªåŠ¨é‡‡é›†ï¼ˆå¦‚ï¼š9:00, 10:00, 11:00...ï¼‰
- ğŸ“¦ æ— éœ€æ‰‹åŠ¨è§¦å‘ï¼Œæ•°æ®ä¼šæŒç»­æ›´æ–°
- ğŸ”„ è‡ªåŠ¨å»é‡ï¼Œä¸ä¼šé‡å¤ä¿å­˜

---

## ğŸ¯ å…¶ä»–æœ‰ç”¨çš„API

### 1. æŸ¥çœ‹RSSæºå¥åº·çŠ¶æ€

```bash
# æ‰‹åŠ¨è§¦å‘å¥åº·æ£€æŸ¥
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/health/check

# æŸ¥çœ‹å¥åº·æŠ¥å‘Š
curl https://ä½ çš„åŸŸå/api/news/scraper/health/report
```

### 2. æŸ¥çœ‹Redisç¼“å­˜çŠ¶æ€

```bash
# ç¼“å­˜ç»Ÿè®¡
curl https://ä½ çš„åŸŸå/api/cache/stats

# ç¼“å­˜å¥åº·æŠ¥å‘Š
curl https://ä½ çš„åŸŸå/api/cache/report
```

### 3. æ‰‹åŠ¨é‡‡é›†å•ä¸ªæº

```bash
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/source/techcrunch-ai
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: é‡‡é›†ä»»åŠ¡å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. GLM APIé™æµï¼ˆ68/69å¤±è´¥çš„æƒ…å†µï¼‰
2. RSSæºä¸å¯ç”¨
3. æ•°æ®åº“è¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æŸ¥çœ‹Renderæ—¥å¿—ç¡®è®¤é”™è¯¯ç±»å‹
2. å¦‚æœæ˜¯APIé™æµï¼Œç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•
3. è¿è¡Œå¥åº·æ£€æŸ¥ï¼š`curl -X POST .../health/check`

### Q2: ä¸ºä»€ä¹ˆæœ‰äº›æ–°é—»æ²¡æœ‰ä¸­æ–‡ç¿»è¯‘ï¼Ÿ

**åŸå› **ï¼š
- GLM APIè°ƒç”¨å¤±è´¥
- è§¦å‘äº†ç¿»è¯‘é™çº§ç­–ç•¥

**å½“å‰ç­–ç•¥**ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹ä¸­æ–‡å†…å®¹ï¼Œä¿ç•™åŸæ–‡
- âœ… æä¾›30+AIæœ¯è¯­åŸºç¡€ç¿»è¯‘
- âœ… æ·»åŠ  `[æœºå™¨ç¿»è¯‘]` æç¤º

### Q3: å¦‚ä½•å¢åŠ é‡‡é›†é¢‘ç‡ï¼Ÿ

ä¿®æ”¹å®šæ—¶ä»»åŠ¡é…ç½®ï¼š

```typescript
// æ”¹ä¸ºæ¯30åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡
@Cron('*/30 * * * *')
async handleHourlyScraping() { ... }

// æ”¹ä¸ºæ¯15åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡
@Cron('*/15 * * * *')
async handleHourlyScraping() { ... }
```

### Q4: å¹¶å‘æ•°èƒ½ç»§ç»­æé«˜å—ï¼Ÿ

å¯ä»¥ï¼Œä½†éœ€è¦æ³¨æ„GLM APIé™æµã€‚å½“å‰é…ç½®ï¼š

```typescript
// apps/api/src/modules/news/services/news-scraper.service.ts:60
const limit = pLimit(4);  // å¯æ”¹ä¸º 5-8
```

**å»ºè®®**ï¼š
- 4-5: å®‰å…¨ï¼Œä¸æ˜“é™æµ
- 6-8: å¿«é€Ÿï¼Œä½†å¯èƒ½è§¦å‘é™æµ
- 9+: ä¸æ¨èï¼Œå®¹æ˜“å¤§é‡å¤±è´¥

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç›‘æ§é‡‡é›†æ•ˆç‡
```bash
# æ¯æ¬¡é‡‡é›†åæŸ¥çœ‹ç»Ÿè®¡
curl https://ä½ çš„åŸŸå/api/news/scraper/stats
```

### 2. å®šæœŸæ¸…ç†æ—§æ•°æ®
```bash
# æ¸…ç†30å¤©å‰çš„æ–°é—»
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/cleanup
```

### 3. ç›‘æ§Redisä½¿ç”¨
```bash
# æŸ¥çœ‹ç¼“å­˜å ç”¨
curl https://ä½ çš„åŸŸå/api/cache/keyspace
```

---

## ğŸŠ å®Œæˆæ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼ˆ2-5åˆ†é’Ÿï¼‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] RenderæœåŠ¡è¿è¡Œæ­£å¸¸ï¼ˆè®¿é—® /api/health è¿”å›200ï¼‰
- [ ] è¿è¡Œé‡‡é›†è„šæœ¬ `trigger-scraping.bat`
- [ ] é‡‡é›†æˆåŠŸï¼ŒæŸ¥çœ‹ç»Ÿè®¡ï¼ˆæ–°å¢>0æ¡ï¼‰
- [ ] åˆ·æ–°å‰ç«¯é¡µé¢ï¼Œèƒ½çœ‹åˆ°æ–°é—»
- [ ] ä¸­æ–‡æ˜¾ç¤ºæ­£å¸¸
- [ ] "æ˜¾ç¤ºåŸæ–‡"æŒ‰é’®å·¥ä½œæ­£å¸¸
- [ ] å‘ä¸‹æ»šåŠ¨èƒ½åŠ è½½æ›´å¤šæ–°é—»

---

## ğŸ’¡ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# è§¦å‘é‡‡é›†
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/trigger

# æŸ¥çœ‹ç»Ÿè®¡
curl https://ä½ çš„åŸŸå/api/news/scraper/stats

# å¥åº·æ£€æŸ¥
curl -X POST https://ä½ çš„åŸŸå/api/news/scraper/health/check

# ç¼“å­˜çŠ¶æ€
curl https://ä½ çš„åŸŸå/api/cache/report
```

---

ç¥é‡‡é›†é¡ºåˆ©ï¼ğŸš€
